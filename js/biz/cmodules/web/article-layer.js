!function(e){function t(t){for(var a,l,n=t[0],c=t[1],s=t[2],_=0,h=[];_<n.length;_++)l=n[_],i[l]&&h.push(i[l][0]),i[l]=0;for(a in c)Object.prototype.hasOwnProperty.call(c,a)&&(e[a]=c[a]);for(d&&d(t);h.length;)h.shift()();return o.push.apply(o,s||[]),r()}function r(){for(var e,t=0;t<o.length;t++){for(var r=o[t],a=!0,n=1;n<r.length;n++){var c=r[n];0!==i[c]&&(a=!1)}a&&(o.splice(t--,1),e=l(l.s=r[0]))}return e}var a={},i={"web/article_layer":0},o=[];function l(t){if(a[t])return a[t].exports;var r=a[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,l),r.l=!0,r.exports}l.m=e,l.c=a,l.d=function(e,t,r){l.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},l.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},l.t=function(e,t){if(1&t&&(e=l(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(l.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)l.d(r,a,function(t){return e[t]}.bind(null,a));return r},l.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return l.d(t,"a",t),t},l.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},l.p="/js/cmodules/";var n=window.webpackJsonp=window.webpackJsonp||[],c=n.push.bind(n);n.push=t,n=n.slice();for(var s=0;s<n.length;s++)t(n[s]);var d=c;o.push([104,"bundles/common","bundles/3113b7f72dc7a6cb1bd72a96856988db"]),r()}({104:function(e,t,r){e.exports=r("t+Nn")},"t+Nn":function(e,t,r){"use strict";r.r(t);r("zxIV"),r("lkNA"),r("t7n3"),r("pIFo"),r("rGqo"),r("Btvt");var a=r("31O9"),i=(r("a1Th"),r("rE2o"),r("ioFf"),r("WF5+"));function o(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var r=[],a=!0,i=!1,o=void 0;try{for(var l,n=e[Symbol.iterator]();!(a=(l=n.next()).done)&&(r.push(l.value),!t||r.length!==t);a=!0);}catch(e){i=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(i)throw o}}return r}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var l,n,c,s,d,_=window,h=_.getW,u=_.getH,p=_.geByTag1,g=_.se,w=_.toggleClass,v=_.setStyle,y=_.domClosest,f=_.isNumeric,b=_.re;class m{static open(e,t,r){var a=o(Object(i.getAppropriateImage)(e[0],window.innerWidth,!0),3),c=a[0],s=S({width:a[1],height:a[2]},{width:window.innerWidth,height:window.innerHeight}),d=h(r)<s.width&&u(r)<s.height;if(c&&d){var _=g('<div class="article_full_view"><img class="article_full_view__image"></div>'),v=p("figcaption",r);v&&v.innerHTML&&_.appendChild(g(`<div class="article_full_view__caption"><div class="article_full_view__caption_inner">${v.innerHTML}</div></div>`)),n=g('<div class="article_full_view__counter"><div class="article_full_view__counter_text"></div><div class="article_full_view__close"></div></div>'),_.appendChild(n),e.length>1&&w(n,"article_full_view__carousel",e.length>1),geByClass1("_article_layer").appendChild(_),_.addEventListener("click",e=>{y("article_full_view__caption_inner",e.target)||m.close()}),_.addEventListener("mousewheel",m.close),l=_;var f=p("img",_);m._showImage(f,e,t),window.articleCloseImageFullSize=m.close}}static _showImage(e,t,r){(w(s,"article_full_view__nav_hidden",0==r),w(c,"article_full_view__nav_hidden",r==t.length-1),t.length>1)&&(geByClass1("article_full_view__counter_text",n).innerHTML=getLang("global_article_carousel_counter").replace("{counter}",r+1).replace("{total}",t.length));d=r;var a=!1,l=o(Object(i.getAppropriateImage)(t[r],window.innerWidth,!0),3),_=l[0],h=S({width:l[1],height:l[2]},{width:window.innerWidth,height:window.innerHeight});if(Object(i.preloadImage)(_,()=>{if(d===r){a=!0,h.width&&f(h.width)?v(e,{width:h.width,height:h.height}):v(e,{width:null,height:null}),e.src=_,removeClass(e,"article_full_view__image_blurred");for(var l=r;l<Math.min(r+3,t.length);l++){var n=o(Object(i.getAppropriateImage)(t[l],window.innerWidth,!0),1)[0];Object(i.preloadImage)(n)}}}))removeClass(e,"article_full_view__image_blurred");else{var u=o(Object(i.getAppropriateImage)(t[r],200,!0),1)[0];Object(i.preloadImage)(u,()=>{d===r&&(a||(v(e,{width:h.width,height:h.height}),e.src=u))}),addClass(e,"article_full_view__image_blurred")}}static close(){return delete window.articleCloseImageFullSize,!!l&&(b(l),l=!1,!0)}}function S(e,t){var r=e.width/e.height,a={};return r>t.width/t.height?(a.width=Math.min(t.width,e.width),a.height=e.height*(a.width/e.width)):(a.height=Math.min(t.height,e.height),a.width=a.height*r),a}var k,L=window,C=L.intval,x=L.domData,B=L.isEmpty,A=L.isArray,T=L.setStyle,E=L.ce,F=[],j=!1,M=!1;class O{static init(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(M=r.mobile||r.isWebView,t&&e.ads&&!B(e.ads)&&!(e.has_more||A(e.ads)&&0==e.ads.length)){var a=E("ins");addClass(a,"mrg-tag"),addClass(a,"article_adsblock"),r.mobile&&addClass(a,"article_adsblock_mobile"),T(a,{display:"block","text-decoration":"none"});var i="";for(var o in r.deviceInfo)r.deviceInfo.hasOwnProperty(o)&&(i+="&"+o+"="+r.deviceInfo[o]);for(var l in e.ads.data["ad-query"]=e.ads.data["ad-query"].replace("%device_info%",i),e.ads.data)e.ads.data.hasOwnProperty(l)&&x(a,l,`${e.ads.data[l]}`);t.appendChild(a),window.MRGtag||(window.MRGtag=[]);var n=r.isWebView?{iframeMode:!0}:{},c=e.ads.eventsHash;if(I(e,r,"requested",c),n.onNoAds=()=>{I(e,r,"no_ads",c)},n.onAdsLoaded=()=>{I(e,r,"ads_loaded",c)},n.onAdsClosed=()=>{I(e,r,"ads_closed",c)},n.onAdsSuccess=()=>{I(e,r,"ads_success",c)},n.onAdsClicked=()=>{I(e,r,"ads_clicked",c)},n.onScriptError=()=>{I(e,r,"script_error",c)},window.MRGtagOnAdsImpression=()=>{I(e,r,"ads_impression",c)},window.MRGtag.push(n),!window.mailRuSdsScriptLoaded){var s=document.createElement("script");s.setAttribute("src",e.ads.script),s.setAttribute("async","true"),document.head.appendChild(s),window.mailRuSdsScriptLoaded=!0}}}static wasShown(){return j}}function I(e,t,r,a){F.push(`${r}/${e.owner_id}_${e.id}/${a}`),clearTimeout(k),k=setTimeout(()=>{var e=M?"article.php":"al_articles.php";ajax.post(e,{act:"ads_event",events:F.join(","),is_web_view:C(t.isWebView)}),F=[]},200)}var D,R,H,P,V,N,$,W,q,G,z=r("RbYe"),Q=window,J=Q.bookmarkArticle,Y=Q.show,X=Q.hide,K=Q.removeClass,U=Q.lockDocumentTitle,Z=Q.setDocumentTitle,ee=Q.replaceEntities,te=Q.stripHTML,re=Q.isObject,ae=Q.buttonLocked,ie=Q.se,oe=Q.inArray,le=Q.toggleClassDelayed,ne=Q.cancelEvent,ce=Q.nav,se=Q.gpeByClass,de=Q.geByClass1,_e=Q.toggleClass,he=Q.setStyle,ue=Q.re,pe=Q.ge,ge=Q.domData,we=Q.addClass,ve=Q.geByClass,ye=Q.domClosestByTag,fe=Q.hasClass,be=Q.intval,me=Q.ajax,Se=Q.isFunction,ke=20,Le=.6,Ce="article_dark_mode",xe=115,Be="article_layer__content_wait_next",Ae={},Te={},Ee="",Fe=!1,je={},Me={},Oe=[],Ie=[],De=!1;class Re{static openEditor(e,t,r,a){if(!Re.isStandalone())return Re.close(!0),setTimeout(()=>{ce.change({z:`article_edit${t}_${r}`,from_rev:!!a&&1})},100),ne(e)}static isStandalone(){return!Fe}static setFaded(e){_e(Me.layer,"article_layer__faded",e)}static updateLocation(){var e=0,t=!1;Ie.forEach(r=>{var a=r.getScreenVisibilityRatio();a>=e&&(t=r.getArticle(),e=a)}),t&&V.raw_id!=t.raw_id&&(V=t,history.replaceState({layer:!0},t.title,t.url),U(!1),Z(t.title),U(!0))}static _toggleArticleVisibility(e,t){var r=pe(`article_view_${e}`);t=be(t),be(ge(r,"visible"))!=t&&(ge(r,"visible",t),he(r,"visibility",t?"":"hidden"))}static _initArticleView(e,t){if(!Re.isArticleWithoutData(e)){var r=se("article_layer__content",pe(`article_view_${e.raw_id}`));r||(K(Re._getLastContentEl(),Be),r=ie(t),Ie.length>0&&(we(r,"article_layer__next_prepared"),requestAnimationFrame(()=>{K(r,"article_layer__next_prepared")})),Me.viewsList.appendChild(r));var o=Ie.length,l=new a.default(e,{getScrollNode:this.getScrollNode.bind(this),getScrollTop:this.getScrollTop.bind(this),isStandalone:Re.isStandalone(),objectsInitDelay:0==o?0:350,onScroll:t=>{if(!vk.widget){e.next_article_url&&t>Le&&Re._canShowMoreView()&&(Re.prepare(e.next_article_url,null,{ref:"scroll"}),we(Re._getLastContentEl(),Be)),t>0&&t<1&&0==o&&Re._updateScrollSet(e);var r=l.getScreenVisibilityRatio();Re.updateLocation(),Re._toggleArticleVisibility(e.raw_id,r>0)}},onImageOpen:(e,t,r)=>{m.open(e,r,t)}},{},!0);Ie.push(l);var n=de("article_layer_ads_place",r);O.init(e,n,je),Re._checkBottomReach(),Re.moderActionsInit(e,r);var c=de("article_layer__mentions",r);c&&c.addEventListener("click",e=>{l.sendStats({type:i.ArticleStatsEvents.clickOnMentions})})}}static _getLastContentEl(){var e=ve("article_layer__content");return e[e.length-1]}static _initBottomReached(){Oe.push(()=>{Re._checkBottomReach()})}static _checkBottomReach(){var e=de("article_layer__views");if(Re.getScrollTop()+window.innerHeight+200>=e.offsetHeight){if(G)return;var t=Ie[Ie.length-1].getArticle();Re._canShowMoreView()&&t.next_article_url&&(Re.prepare(t.next_article_url),G=setTimeout(()=>{Re._loadNextArticle(t.next_article_url),G=!1},300))}}static _canShowMoreView(){return Ie.length<ke}static closeImageFullSize(){return m.close()}static _loadNextArticle(e){Re.prepare(e,(e,t)=>{Re._initArticleView(t,e)})}static _restoreScroll(e){var t=Re._getSavedScroll(e.url);Re.setScrollTop(t)}static _deinitLayer(){Oe.forEach(e=>{var t=Re.getScrollNode();t&&t.removeEventListener("scroll",e)}),Oe.splice(0,Oe.length),clearTimeout(G)}static _removeAllViews(){Ie.forEach(e=>{e.deinit()}),Ie.splice(0,Ie.length),Me.viewsList&&(Me.viewsList.innerHTML="")}static show(e,t,r){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};if(!Re.isArticleWithoutData(e))if(Fe=t,void 0!==a&&(je=a),r&&(boxRefreshCoords(boxLoader),Y(boxLoader),Y(boxLayerWrap)),Re._deinitLayer(),layers.fullhide=!1,re(e)){var i=e;Re._initLayer(),Re._initArticleView(i),V=i,Re._restoreScroll(i),Re._initFooter()}else Re.setFaded(!0),Re.prepare(e,(e,t,i)=>{Re.setFaded(!1),r&&(X(boxLoader),X(boxLayerWrap)),Re._removeAllViews(),!0!==i.error?(Re._initLayer(),Re._initArticleView(t,e),V=t,Re._restoreScroll(t),Re._initFooter(),t.title&&(P=document.title,U(!1),Z(ee(te(t.title))),U(!0)),a.ev&&domClosest("bookmarks_row_type_article",a.ev.target)&&statlogsValueEvent("bookmarks_product_analytics",{item_type:"article",item_owner_id:t.owner_id,item_id:t.id,time:window.getServerTime()}),Se(a.onShowDone)&&a.onShowDone()):showFastBox({title:getLang("global_error")},i.error_message||getLang("global_unknown_error"))},{async:a.prepareAsync})}static isShown(){return!!Me.layer}static isArticleWithoutData(e){return isArray(e)&&0===e.length}static back(){var e=Ie.length&&Ie[0].getArticle();if(Re.isStandalone())if(e&&e.is_blog){if(e.from_blog&&window.history&&window.history.length>1)return window.history.back(),!0;location.href=e.owner_href}else location.href="/feed";else history.go(-1)}static close(e){if(!Re.isShown())return!0;var t=Ie.length&&Ie[0].getArticle(),r=t?t.owner_href:"",a=V.back_url;if(Re.isStandalone())return t.is_blog&&t.from_blog&&window.history&&window.history.length>1?(window.history.back(),!0):(window.location.href=a||r||"/feed",!0);if(window.onbeforeunload=!1,layers&&layers.hide&&layers.hide(),vk.widget)window.Rpc&&window.Rpc.callMethod("destroy");else{if(e){Re._deinitLayer();var i=-1;window.cur&&cur.articleSequence&&(i=-cur.articleSequence),history.go(i),cur.articleSequence=0}else Re._removeAllViews(),K(bodyNode,"body_article_layer"),P&&(U(!1),Z(P)),ue(Me.layer),Me.layer=!1,Se(W)&&W();H&&H.destroy(),window.FastChat&&FastChat.toggleFastChats(!0),D&&window.removeEventListener("beforeunload",D),D=!1}}static getScrollNode(){return Re.isStandalone()?window:Me.layer}static getScrollTop(){return Re.isStandalone()?scrollGetY():Me.layer.scrollTop}static setScrollTop(e){(Re.isStandalone()?window.scrollNode:Me.layer).scrollTop=e}static _initLayer(){if(!Me.layer){if(Me.layer=de("_article_layer"),!Me.layer){if(!Ee)throw new Error("Article layer html not found");Me.layer=ie(Ee),document.body.appendChild(Me.layer),we(bodyNode,"body_article_layer"),he(Me.layer,{opacity:1})}Me.up=de("article_layer__up",Me.layer),Me.darkBtn=de("article_layer__dark",Me.layer),Me.closeBtn=de("article_layer__close",Me.layer),Me.placeholderCloseBtn=de("article_layer_placeholder__back_button",Me.layer),Me.viewsList=de("article_layer__views",Me.layer),N&&Me.darkBtn.removeEventListener("click",N),Me.darkBtn.addEventListener("click",N=()=>{Re._toggleDarkMode(),Ie[Ie.length-1].sendStats({type:De?i.ArticleStatsEvents.nightModeOn:i.ArticleStatsEvents.nightModeOff})}),$&&Me.closeBtn.removeEventListener("click",$),Me.closeBtn.addEventListener("click",$=()=>{(Re.close(!0),Ie.length)&&Ie[Ie.length-1].sendStats({type:i.ArticleStatsEvents.close})}),vk.widget&&ue(Me.up),Me.placeholderCloseBtn&&(q&&Me.placeholderCloseBtn.removeEventListener("click",q),Me.placeholderCloseBtn.addEventListener("click",q=Re.close.bind(null,!0))),Me.scrollNode=vk.widget||!Re.isStandalone()?Me.layer:document.scrollingElement,Re.isStandalone()||(D&&window.removeEventListener("beforeunload",D),window.addEventListener("beforeunload",D=()=>{window.scrollTo(0,0)})),Re.getScrollNode().addEventListener("scroll",e=>{Oe.forEach(t=>{t(e)})}),Oe.push(()=>{_e(Me.up,"article_layer__up--shown",Re.getScrollTop()>0)});var e=de("article_layer__inner",Me.layer);R=ie(`<div class='article_anchor_tooltip_content'>${getLang("pages_article_anchor_copy")}</div>`),H=new ElementTooltip(Me.layer,{content:R,autoShow:!1,customShow:!0,forceSide:"top",cls:"article_anchor_tooltip",noBorder:!0,onHide:()=>{R.innerHTML=getLang("pages_article_anchor_copy")}}),Me.layer.addEventListener("mousemove",t=>{if(_e(Me.layer,"article_layer__hover_left",e.contains(t.target)&&t.pageX<xe),fe(t.target,"article_anchor_button")&&H&&!H.isShown()){var r=t.target.getBoundingClientRect(),a=r.top,i=r.left;H.show();var o=H._ttel.getBoundingClientRect(),l=Re.getScrollTop();he(H._ttel,{top:a+l-o.height-5,left:i-o.width/2+13}),t.target.addEventListener("mouseout",()=>{H.hide()})}}),Me.layer.addEventListener("click",e=>{if(fe(Me.layer,"article_layer__hover_left")&&(fe(Me.up,"article_layer__up--shown")?Re.setScrollTop(0):Re.back()),fe(e.target,"article_anchor_button")&&e.target.id){var t=se("article_view",e.target),r=ge(t,"article-url"),a=`${location.protocol}//${location.host}${r}`;ye("h1",e.target)?Object(z.copyToClipboard)(a):Object(z.copyToClipboard)(`${a}?anchor=${e.target.id}`),R.innerHTML=getLang("pages_article_anchor_copied")}fe(Me.layer,"article_layer__hover_right")&&Re.close(!0)}),window.FastChat&&window.FastChat.toggleFastChats(!1),Re._initBottomReached()}}static _initFooter(){if(vk.id){var e,t,r,a={Static:"static",FixedShown:"fix_shown",FixedHidden:"fix_hidden"},i=!1,o=Re.getScrollTop(),l=!0;Oe.push(r=()=>{V||(V=Ie[0].getArticle());var e=pe("article_view_"+V.raw_id),r=se("article_layer__content",e),n=de("article_layer__content_footer",r);if(r&&n){var s=Re.getScrollTop(),d=s<=o;o=s,i!=n&&(t=r.offsetTop+n.offsetTop,c(i,a.Static)),i=n;var _=s+window.innerHeight<t-100;c(n,_?!_||d?a.FixedShown:a.FixedHidden:a.Static,l),l=!1}}),r()}function n(e,t){he(e,"transform",`translateY(${t?"0%":"100%"}`)}function c(t,r,i){var o=ge(t,"state")||a.Static;o!=r&&(e||(o==a.Static?r==a.FixedShown?(n(t,!1),i?(we(t,"article_layer__content_footer--fix"),n(t,!0)):e=setTimeout(()=>{we(t,"article_layer__content_footer--fix"),e=setTimeout(()=>{n(t,!0),e=!1})})):r==a.FixedHidden&&(n(t,!1),e=setTimeout(()=>{we(t,"article_layer__content_footer--fix"),e=!1})):o==a.FixedShown?r==a.FixedHidden?n(t,!1):r==a.Static&&(n(t,!1),e=setTimeout(()=>{K(t,"article_layer__content_footer--fix"),n(t,!0),e=!1},350)):o==a.FixedHidden&&(r==a.FixedShown?n(t,!0):r==a.Static&&(K(t,"article_layer__content_footer--fix"),n(t,!0))),ge(t,"state",r)))}}static onShareBtnClick(e,t){showBox("like.php",{act:"publish_box",object:t},{stat:["page.js","page.css","wide_dd.js","wide_dd.css","sharebox.js"],onFail:function(e){return showDoneBox(e),!0}})}static onFaveBtnClick(e,t,r,a,i,o){var l=se("article_layer__content",domQuery1(`[data-article-url="${i}"]`));window.stManager.add(["notifier.css","notifier.js"]);var n=!1;each(ve("article_layer__content_footer_button_bookmark",l),(e,t)=>{n=_e(t,"activated")}),J(null,null,t,r,"article",o,!n)}static onReportBtnClick(e,t,r,a){var i=showBox("al_articles.php",{act:"report_box"},{onDone:()=>{var e=ve("radiobtn","article_report");radioBtns.article_report={val:0,els:e}},params:{onClean:()=>{delete radioBtns.article_report}}});i.removeButtons(),i.addButton(getLang("box_send"),e=>{Re._sendReport(e,t,r,a)}),i.addButton(getLang("global_cancel"),!1,"no")}static _sendReport(e,t,r,a){me.post("al_articles.php",{act:"report",owner_id:t,article_id:r,hash:a,reason:radioBtns.article_report.val},{onDone:()=>{curBox().hide(),showDoneBox(getLang("pages_article_report_sent"),{className:"article_done_msg",parentEl:"_article_layer"})},showProgress:lockButton.pbind(e),hideProgress:unlockButton.pbind(e)})}static _getSavedScroll(e){return(window.ls.get("articles_scrolls")||{})[e]||0}static _updateScrollSet(e){var t=Re.getScrollTop(),r=ls.get("articles_scrolls")||{};Object.keys(r).length>100&&(r={}),r[e.url]=t,ls.set("articles_scrolls",r)}static getDarkMode(){return!!be(localStorage.getItem(Ce))}static _toggleDarkMode(e,t){De=_e(Me.layer,"article_dark",t),Re.isStandalone()&&_e(document.body,"article_dark",De),t?_e(Me.layerSubscribeBtn,"black",De):(we(Me.layerSubscribeBtn,"article_layer_btn_transition"),setTimeout(()=>{K(Me.layerSubscribeBtn,"article_layer_btn_transition")},450),le(Me.layerSubscribeBtn,"black",De)),void 0===t&&vk.id&&me.post("al_articles.php",{act:"set_dark_mode",is_on:be(De)}),localStorage.setItem(Ce,be(De))}static clearAllPrepared(){Ae={}}static clearPrepared(e){e=e.replace(/^\//,""),delete Ae[e]}static prepare(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(t||(t=()=>{}),re(e)&&(e=e.url),e=e.replace(/^\//,""),re(Ae[e])){var a=()=>t(...Ae[e].result);return r.async?void setTimeout(a,0):a()}if(Ae[e]=Ae[e]||[],Ae[e].push(t),!(Ae[e].length>1)){var i=oe(cur.module,["groups","profile","public"])?cur.oid:"",o="",l="";r.ref&&(l=r.ref),Se(r.onCloseCallBack)&&(W=r.onCloseCallBack),o=cur.authorPage?"author_page_"+cur.authorPage.sortType:cur.module,me.post("al_articles.php",{act:"view",url:e,layer:1,wall_owner_id:i,context:o,ref:l},{onDone:(t,r,a,i)=>{var o=Ae[e]||[];Ee=t,Ae[e]={result:[r,a,i]},o.forEach(t=>t.apply(null,Ae[e].result))},onFail:()=>(Se(r.onCloseCallBack)&&r.onFailCallBack(),!0)}),window.cur&&cur.destroy.push(()=>{Re.clearPrepared()})}}static clearPrepared(){Ae={}}static onSubscribeBtnClick(e){if(!ae(e)){var t=JSON.parse(ge(e,"data")),r=fe(e,"secondary"),a={showProgress:lockButton.pbind(e),hideProgress:unlockButton.pbind(e),onDone:function(){Te[t.oid]=!r,_e(e,"secondary"),t.confirm&&r&&X(e)}};if(t.oid>0)me.post("al_friends.php",{act:r?"remove":"add",mid:t.oid,hash:t.hash},a);else{var i=me.post.pbind("al_groups.php",{act:r?"a_leave":"a_enter",gid:-t.oid,hash:t.hash},a);if(t.confirm&&r)var o=showFastBox(t.confirm.title,t.confirm.text,t.confirm.btn,function(){o.hide(),i()},getLang("global_cancel"));else i()}}}static moderActionsInit(e,t){var r=e.moder_actions_hash,a=domQuery1("#article_moder_rev_sel",t);a&&a.addEventListener("change",e=>{ce.change({rev:e.target.value}),location.reload()});var i=domQuery1("#article_moder__rev_restore",t);i&&i.addEventListener("click",()=>{a.value&&me.post("al_articles.php",{act:"moder_restore_article_rev",hash:r,article_owner_id:e.owner_id,article_id:e.id,revision:be(a.value)},{showProgress:lockButton.pbind(i),onDone:()=>{ce.change({rev:!1}),location.reload()}})});var o=domQuery1("#article_moder__ban_btn",t);if(o){var l=be(o.getAttribute("data-banned"))?0:1;o.addEventListener("click",()=>{me.post("al_articles.php",{act:"moder_ban_article",hash:r,article_owner_id:e.owner_id,article_id:e.id,do_ban:be(l)},{showProgress:lockButton.pbind(o),onDone:()=>{location.reload()}})})}}}window.ArticleLayer=Re;try{stManager.done(jsc("web/article_layer.js"))}catch(e){}}});